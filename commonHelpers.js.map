{"version":3,"file":"commonHelpers.js","sources":["../src/gallery-service.js","../src/main.js"],"sourcesContent":["const API_KEY = '42127236-8bfdbbfbeed8a2dadaca720e8';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport default class GalerryApiService {\n    constructor() {\n        this.userQuery = '';\n        this.page = 1;\n\n    }\n\n    async fetchArticles() {\n        \n       const response = await axios.get(`${BASE_URL}?key=${API_KEY}&q=${this.userQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${this.page}&per_page=15`);\n\n        this.incrementPage();\n\n        return response.data;\n       \n\n\n    }\n\n    incrementPage() {\n        this.page += 1;\n    }\n\n    resetPage() {\n        this.page = 1;\n    }\n\n    get query() {\n        return this.userQuery;\n    }\n\n    set query(newQuery) {\n        this.userQuery = newQuery;\n    }\n}","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport GalerryApiService from \"./gallery-service\";\n\nconst inputElem = document.querySelector('.search-input');\nconst formElem = document.querySelector('.search-form');\nconst imagesContainer = document.querySelector('.gallery');\nconst divElem = document.querySelector('div');\nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\n\n\nconst galerryApiService = new GalerryApiService();\n\n\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  loadMoreBtn.append(loader);\n}\n\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\nformElem.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\n\nfunction onSearch(e) {\n  showLoader();\n  imagesContainer.innerHTML = \"\";\n  e.preventDefault();\n  clearGallery();\n  galerryApiService.userQuery = e.currentTarget.elements.\n      searchQuery.value;\n  if (galerryApiService.userQuery.trim() === '') {\n    iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topLeft',\n                transitionIn: \"fadeInLeft\",\n            });\n            hideLoader()\n  };\n  showLoadMoreBtn();\n  galerryApiService.resetPage();\n  \n  galerryApiService.fetchArticles().then(function (response) {\n    appendGallery(response);\n  });\n    \n}\n\nfunction onLoadMore() {\ngalerryApiService.fetchArticles().then(function (response) {\n    appendGallery(response);\n  });\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\n\nfunction generateMarkupGalerry(response) {\n  return response.hits.map((response) => {\n  return `\n            <li class=\"gallery-item\"><a href=\"${response.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${response.webformatURL}\" alt=\"${response.tags}\"></a>\n          <p>Likes: ${response.likes}</p>\n          <p>Views: ${response.views}</p>\n          <p>Comments: ${response.comments}</p>\n          <p>Downloads: ${response.downloads}</p>\n          </li>`;\n  }).join('');\n \n}\n\nfunction appendGallery(response) {\n  imagesContainer.insertAdjacentHTML('beforeend', generateMarkupGalerry(response));\n\n  const lightbox = new SimpleLightbox('.gallery a', options);\n      lightbox.on('show.simplelightbox');\n      lightbox.refresh();\n  formElem.reset();\n  hideLoader();\n      \n    \n}\n\nfunction clearGallery() {\n  imagesContainer.innerHTML = '';\n}\n \n\nconst options = {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionSelector: \"img\",\n  captionDelay: 250,\n};\n\n"],"names":["API_KEY","BASE_URL","GalerryApiService","response","newQuery","formElem","imagesContainer","loadMoreBtn","galerryApiService","showLoader","loader","hideLoader","onSearch","onLoadMore","e","clearGallery","iziToast","showLoadMoreBtn","appendGallery","generateMarkupGalerry","lightbox","SimpleLightbox","options"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAGF,MAAMC,CAAkB,CACnC,aAAc,CACV,KAAK,UAAY,GACjB,KAAK,KAAO,CAEf,CAED,MAAM,eAAgB,CAEnB,MAAMC,EAAW,MAAM,MAAM,IAAI,GAAGF,CAAQ,QAAQD,CAAO,MAAM,KAAK,SAAS,iEAAiE,KAAK,IAAI,cAAc,EAEtK,YAAK,cAAa,EAEXG,EAAS,IAInB,CAED,eAAgB,CACZ,KAAK,MAAQ,CAChB,CAED,WAAY,CACR,KAAK,KAAO,CACf,CAED,IAAI,OAAQ,CACR,OAAO,KAAK,SACf,CAED,IAAI,MAAMC,EAAU,CAChB,KAAK,UAAYA,CACpB,CACL,CC9BkB,SAAS,cAAc,eAAe,EACxD,MAAMC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAkB,SAAS,cAAc,UAAU,EACzC,SAAS,cAAc,KAAK,EAC5C,MAAMC,EAAc,SAAS,cAAc,2BAA2B,EAGhEC,EAAoB,IAAIN,EAGxBO,EAAa,IAAM,CACvB,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BH,EAAY,OAAOG,CAAM,CAC3B,EAEMC,EAAa,IAAM,CACvB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,EAEAL,EAAS,iBAAiB,SAAUO,CAAQ,EAC5CL,EAAY,iBAAiB,QAASM,CAAU,EAGhD,SAASD,EAASE,EAAG,CACnBL,IACAH,EAAgB,UAAY,GAC5BQ,EAAE,eAAc,EAChBC,IACAP,EAAkB,UAAYM,EAAE,cAAc,SAC1C,YAAY,MACZN,EAAkB,UAAU,KAAI,IAAO,KACzCQ,EAAS,MAAM,CACH,QAAS,2EACT,SAAU,UACV,aAAc,YAC9B,CAAa,EACDL,EAAY,GAEtBM,EAAe,EACfT,EAAkB,UAAS,EAE3BA,EAAkB,cAAa,EAAG,KAAK,SAAUL,EAAU,CACzDe,EAAcf,CAAQ,CAC1B,CAAG,CAEH,CAEA,SAASU,GAAa,CACtBL,EAAkB,cAAe,EAAC,KAAK,SAAUL,EAAU,CACvDe,EAAcf,CAAQ,CAC1B,CAAG,CACH,CAEA,SAASc,GAAkB,CACzBV,EAAY,UAAU,OAAO,WAAW,CAC1C,CAGA,SAASY,EAAsBhB,EAAU,CACvC,OAAOA,EAAS,KAAK,IAAKA,GACnB;AAAA,gDACuCA,EAAS,aAAa;AAAA,4CAC1BA,EAAS,YAAY,UAAUA,EAAS,IAAI;AAAA,sBAClEA,EAAS,KAAK;AAAA,sBACdA,EAAS,KAAK;AAAA,yBACXA,EAAS,QAAQ;AAAA,0BAChBA,EAAS,SAAS;AAAA,gBAEzC,EAAE,KAAK,EAAE,CAEZ,CAEA,SAASe,EAAcf,EAAU,CAC/BG,EAAgB,mBAAmB,YAAaa,EAAsBhB,CAAQ,CAAC,EAE/E,MAAMiB,EAAW,IAAIC,EAAe,aAAcC,CAAO,EACrDF,EAAS,GAAG,qBAAqB,EACjCA,EAAS,QAAO,EACpBf,EAAS,MAAK,EACdM,GAGF,CAEA,SAASI,GAAe,CACtBT,EAAgB,UAAY,EAC9B,CAGA,MAAMgB,EAAU,CACd,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,gBAAiB,MACjB,aAAc,GAChB"}